!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){n(1),t.exports=n(8)},function(t,e,n){"use strict";var r=n(2),o=function(t){return t&&t.__esModule?t:{default:t}}(r);window.addEventListener("load",function(){var t=document.querySelector("[data-whos-coming]");if(t){var e=new o.default(t);e.shouldStart()&&e.start()}})},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(3),s=n(4),u=n(5),l=n(6),h=n(7),d=function(){function t(e){var n=this;i(this,t),this.columnUSort=this.columnUSort.bind(this),this.setActiveOption=this.setActiveOption.bind(this),this.setSearchTerm=this.setSearchTerm.bind(this),this.setSortColumn=this.setSortColumn.bind(this),this.activeOption=null,this.searchField=null,this.selectField=null,this.searchTerm=null,this.sortDirection="asc",this.shouldStart=function(){return n.keyRow&&n.rows&&n.columns},this.container=e,this.setUp()}return a(t,[{key:"setUp",value:function(){try{this.keyRow=this.container.querySelector(".whos-coming__row--key"),this.columns=[].concat(o(this.keyRow.querySelectorAll("[data-whos-coming-column]"))),this.columnToSortBy=this.columns[0].getAttribute("data-whos-coming-column"),this.rows=t.makeRows()}catch(t){}}},{key:"start",value:function(){(0,u.startSortByColumn)({columns:this.columns,onChange:this.setSortColumn}),this.maybeStartSearch(),this.maybeStartSelect(),this.render()}},{key:"maybeStartSearch",value:function(){var t=document.querySelector("[data-whos-coming-search]");t&&(this.searchField=t.getAttribute("data-whos-coming-search"),(0,s.startSearch)({onChange:this.setSearchTerm,searchInput:t}))}},{key:"maybeStartSelect",value:function(){var t=document.querySelector("[data-whos-coming-select]");t&&(this.selectField=t.getAttribute("data-whos-coming-select"),(0,c.startSelect)({select:t,selectField:this.selectField,onChange:this.setActiveOption,rows:this.rows}))}},{key:"setActiveOption",value:function(t){this.activeOption=t,this.render()}},{key:"setSearchTerm",value:function(t){this.searchTerm=t,this.render()}},{key:"setSortColumn",value:function(t){var e=t.getAttribute("data-whos-coming-column");e===this.columnToSortBy?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortDirection="asc",this.columnToSortBy=e),this.render()}},{key:"matchesSearch",value:function(t,e){for(var n=0;n<t.length;n+=1)for(var r=0;r<e.length;r+=1){if(-1!==t[n].indexOf(e[r]))return console.log(t,e),!0;if(-1!==e[r].indexOf(t[n]))return!0}return!1}},{key:"columnUSort",value:function(t,e){return t.data[this.columnToSortBy]===e.data[this.columnToSortBy]?0:"asc"===this.sortDirection?t.data[this.columnToSortBy]<e.data[this.columnToSortBy]?-1:1:t.data[this.columnToSortBy]>e.data[this.columnToSortBy]?-1:1}},{key:"renderDirectionalArrow",value:function(){this.columns.forEach(function(t){var e=t.querySelector(".whos-coming__arrow");e&&t.removeChild(e)});var t=document.createElement("SPAN");t.classList.add("whos-coming__arrow"),t.innerHTML="asc"===this.sortDirection?h.downArrow:l.upArrow,document.querySelector('[data-whos-coming-column="'+this.columnToSortBy+'"]').appendChild(t)}},{key:"render",value:function(){var t,e=this;this.container.innerHTML="",(t=this.container).append.apply(t,o([this.keyRow].concat(this.rows.filter(function(t){return!e.activeOption||t.data[e.selectField]===e.activeOption}).filter(function(t){return!e.searchTerm||e.matchesSearch(e.searchTerm.replace(/[^a-zA-Z\d\s:]/g,"").toLowerCase().split(" ").filter(function(t){return t.length}),t.data[e.searchField].replace(/[^a-zA-Z\d\s:]/g,"").toLowerCase().split(" ").filter(function(t){return t.length}))}).sort(this.columnUSort).map(function(t){return t.element})))),this.renderDirectionalArrow()}}]),t}();d.getRowData=function(t){return[].concat(o(t.querySelectorAll("[data-whos-coming-data]"))).reduce(function(t,e){return Object.assign({},t,r({},e.getAttribute("data-whos-coming-data"),e.innerHTML.trim()))},{})},d.makeRows=function(){return[].concat(o(document.querySelectorAll(".whos-coming__row:not(.whos-coming__row--key)"))).map(function(t){return{element:t,data:d.getRowData(t)}})},e.default=d},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){var e=t.options,n=t.select;e.forEach(function(t){var e=document.createElement("OPTION");e.setAttribute("value",t),e.innerHTML=t,n.append(e)})},i=function(t){var e=t.rows,n=t.selectField;return[].concat(r(e)).reduce(function(t,e){return-1===t.indexOf(e.data[n])&&t.push(e.data[n]),t},[])},a=function(t){var e=t.select;(0,t.onChange)(e.value&&-1===e.value.indexOf("--")?e.value:null)};e.startSelect=function(t){var e=t.selectField,n=t.select,r=t.onChange,c=t.rows,s=i({rows:c,selectField:e});s.sort(),o({options:s,select:n}),n.addEventListener("change",function(){a({select:n,onChange:r})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.startSearch=function(t){var e=t.onChange,n=t.searchInput;n.addEventListener("keyup",function(t){e(t.target.value)}),n.addEventListener("search",function(t){t.target.value.trim()||e(null)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){var e=t.column,n=t.onChange;e.addEventListener("click",function(){return n(e)})};e.startSortByColumn=function(t){var e=t.columns,n=t.onChange;e.forEach(function(t){return r({column:t,onChange:n})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.upArrow='<svg width="1792" height="1792" viewBox="0 0 1792 1792">\n<path d="M1395 1184q0 13-10 23l-50 50q-10 10-23 10t-23-10l-393-393-393 393q-10 10-23 10t-23-10l-50-50q-10-10-10-23t10-23l466-466q10-10 23-10t23 10l466 466q10 10 10 23z" fill="currentColor"/>\n</svg>'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.downArrow='<svg width="1792" height="1792" viewBox="0 0 1792 1792" class="down-arrow-svg">\n<title>Open</title>\n<path d="M1395 736q0 13-10 23l-466 466q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l393 393 393-393q10-10 23-10t23 10l50 50q10 10 10 23z" fill="currentColor"/>\n</svg>'},function(t,e){}]);
//# sourceMappingURL=whos-coming.min.js.map